# ============================================================
#  amoCRM credentials
# ============================================================
AMO_SUBDOMAIN=yoursubdomain
AMO_CLIENT_ID=
AMO_CLIENT_SECRET=
AMO_REDIRECT_URI=https://yandex.uz/

# Paste the full redirect URL you received after OAuth consent here.
# Used ONCE on first run to exchange for access+refresh tokens.
AMO_AUTH_CODE=

# Token file path (auto-written after first successful OAuth exchange).
AMO_TOKEN_STORE=.amo_tokens.json

# ============================================================
#  Google Sheets credentials
# ============================================================
GOOGLE_SERVICE_ACCOUNT_FILE=gsheet.json
GOOGLE_SHEET_ID=
GOOGLE_WORKSHEET_NAME=Sheet1

# ============================================================
#  Sync behaviour
# ============================================================
# The exact AMO status name that triggers a lead to be written to Google Sheets.
TRIGGER_STATUS_NAME=NOMERATSIYALANMAGAN ZAKAZ

# Leave these as 0 unless you need hard-coded fallbacks.
TRIGGER_STATUS_ID=0
PIPELINE_ID=0

# Statuses users can pick in the Sheet dropdown that sync back to AMO.
# Values are AMO status IDs; set to 0 to let the service resolve them automatically.
DROPDOWN_STATUS_MAP_JSON={"В процессе":0, "У курера":0, "Отказ":0, "Успешно":0}

# ============================================================
#  Production tuning
# ============================================================
# Unix timestamp - leads created BEFORE this date are ignored by the webhook handler.
# 0 = process all leads.
# Example: to ignore leads older than 2026-01-01 00:00 UTC use 1735689600
LEADS_CREATED_AFTER=0

# Seconds between consecutive amoCRM API calls (throttle).
# Increase to 0.5 or 1.0 on prod if you see 429 errors.
AMO_REQUEST_DELAY_SEC=0.2

# Seconds the Staff sheet lookup is cached before re-reading Google Sheets.
STAFF_CACHE_TTL_SEC=300

# Seconds within which duplicate webhooks for the same (lead, status) are ignored.
# amoCRM retries unacknowledged webhooks — this prevents redundant API calls.
WEBHOOK_DEDUP_TTL_SEC=60

# Seconds between Google Sheet -> AMO sync poll cycles.
SYNC_POLL_SECONDS=10

# Hours offset from UTC used when displaying timestamps in the Google Sheet.
# Uzbekistan / Tashkent = 5 (UTC+5).  Moscow = 3.  UTC = 0.
DISPLAY_TZ_OFFSET=5

# ============================================================
#  Server
# ============================================================
HOST=0.0.0.0
PORT=8000

# ============================================================
#  Bulk import (import_xlsx.py)
# ============================================================
IMPORT_BATCH_SIZE=50
IMPORT_DELAY_SEC=0.5